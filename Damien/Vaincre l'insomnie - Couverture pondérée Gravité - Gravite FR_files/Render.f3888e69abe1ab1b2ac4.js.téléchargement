(window.klaviyoOnsiteJSONP=window.klaviyoOnsiteJSONP||[]).push([[4],{"../forms/src/Client/Components/FormComponents/FormComponent/typeToComponentMapping.tsx":function(e,t,o){"use strict";o.d(t,"a",(function(){return ee}));var n=o("../forms/src/Constants/components.ts"),r=o("../../node_modules/preact/compat/dist/compat.module.js"),i=o("../forms/node_modules/react-redux/es/index.js"),s=o("../forms/src/ClientStore/index.ts"),a=o("../../node_modules/@babel/runtime/helpers/extends.js"),l=o.n(a),d=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),c=o.n(d);o("../forms/src/Client/Components/FormComponents/RichText/editorCSS.scss");const m=["html"];var u=e=>{let{html:t}=e,o=c()(e,m);return r.default.createElement("div",l()({},t?{dangerouslySetInnerHTML:{__html:t}}:{},{style:{width:"100%"},className:`${n.o} ${n.l}`},o))},p=o("../forms/src/Constants/quill.ts");var f=({itemId:e,parentType:t=p.a})=>{const o=Object(i.c)(o=>t===p.b?s.y.getTeaserQuillHTML(o,e):s.i.getComponentQuillHTML(o,e));return o?r.default.createElement(u,{html:o}):null},b=o("../forms/src/Client/Components/ResetElements/index.tsx"),g=(o("../../node_modules/core-js/modules/es6.array.iterator.js"),o("../../node_modules/core-js/modules/web.dom.iterable.js"),o("../forms/src/Client/formActions/formActions.ts")),h=o("../forms/src/Constants/actions.ts");const y=["children","actionId","formVersionCId"];var C=e=>{let{children:t,actionId:o,formVersionCId:n}=e,a=c()(e,y);const[l,d]=Object(r.useState)(!1),m=Object(i.c)(e=>o?s.b.getAriaPropsFromFormAction(e,o):{});return t(Object.assign({onClick:o?()=>{if(o){const e=Object(g.a)({actionId:o,formVersionCId:n}),t=new e({actionId:o,formVersionCId:n});h.c.has(e.formActionType)&&d(!0),t.runAction().catch(()=>{d(!1);const e=document.querySelector(`.klaviyo-form-version-cid_${n} [aria-invalid="true"]`);e&&e.focus()})}}:void 0,handlingFormAction:l,ariaProps:m},a))};const I=()=>null;var x=({formVersionCId:e,componentId:t})=>{const o=Object(i.c)(s.e.isDesignWorkflow),n=Object(i.c)(e=>s.i.getComponentStyling(e,t)),a=Object(i.c)(e=>s.i.getComponentImage(e,t)),d=Object(i.c)(e=>s.i.getComponentAltText(e,t)),c=Object(i.c)(e=>s.i.getComponentActionId(e,t)),m=c?b.d:b.e,u=n.width||100;return r.default.createElement(b.b,{style:{display:"flex",alignItems:"center",width:"100%",height:"auto"}},o&&!a?r.default.createElement(I,null):a&&r.default.createElement(C,{actionId:c,formVersionCId:e},({onClick:e,handlingFormAction:t,ariaProps:n})=>r.default.createElement(b.b,{className:t?"klaviyo-spinner":"",style:{position:"relative",display:"flex",alignItems:"center",width:"100%",height:"auto"},onClick:e},r.default.createElement(m,l()({style:{maxWidth:"100%",width:u,height:"auto",cursor:e?"pointer":"initial"},src:a.url,alt:d,tabIndex:o||!c?-1:0},n)))))},O=(o("../../node_modules/core-js/modules/es6.regexp.replace.js"),o("../../node_modules/lodash-es/uniqueId.js")),j=o("../../node_modules/goober/dist/goober.esm.js"),v=o("../forms/src/Utils/onsiteApi/learnq.ts"),S=o("../forms/src/Client/Components/ResetElements/CleaveInput.tsx"),w=o("../forms/src/Client/Components/FormComponents/Label.tsx"),T=o("../forms/src/Client/Components/FormComponents/ValidationMessage.tsx");let E,k=e=>e;var V=({formVersionCId:e,componentId:t,theme:o})=>{var a;const l=Object(i.c)(s.e.isDesignWorkflow),d=Object(i.c)(o=>s.u.getOpenFormVersionComponentInstance(o,e,t)),c=Object(i.c)(e=>s.i.getComponentLabel(e,t)),m=Object(i.c)(e=>s.i.getComponentPlaceholder(e,t)),u=Object(i.c)(e=>s.i.getComponentType(e,t)),p=Object(i.c)(e=>s.i.getComponentFormat(e,t)),f=Object(i.c)(e=>s.i.getComponentDelimiter(e,t)),g=Object(i.c)(e=>s.i.getComponentPrefill(e,t)),h=Object(i.b)(),{current:y}=Object(r.useRef)(Object(O.a)("klaviyo_ariaid_")),[C,I]=Object(r.useState)(!1),[x,V]=Object(r.useState)(!1),[_,A]=Object(r.useState)(),$=({value:o,validate:r,hasChangedSinceLastValidation:i})=>{var a;const l=void 0!==o?o:"";A(l),I(!1),V(!!i),h(s.u.validateOpenFormVersionComponent({formVersionCId:e,componentId:t,value:u===n.c?null==(a=n.e.find(({value:e})=>JSON.stringify(e)===JSON.stringify(p)))?void 0:a.convertValue(l,f):l,validate:r}))};Object(r.useEffect)(()=>{const e=Object(v.b)();if(g&&e&&u===n.g&&!l){const{$email:t}=e;$({value:t,validate:!1})}},[]);const F=x||!1==!l||!d||void 0===d.valid||d.valid,D=u!==n.c||m&&!C?m:null==(a=n.e.find(({value:e})=>JSON.stringify(e)===JSON.stringify(p)))?void 0:a.label.replace(/ /g,f),M=u===n.c?S.a:b.f;return r.default.createElement(b.b,{style:{display:"flex",flexGrow:1,flexDirection:"column",alignSelf:"flex-end"}},r.default.createElement(w.a,{theme:o},c),r.default.createElement(M,{className:Object(j.a)(E||(E=k`
&& {
          &&& {
            &::placeholder {
              color: ${0};
              font-family: ${0};
              font-size: ${0};
              font-weight: ${0};
              letter-spacing: ${0}px;
            }
            &::-moz-placeholder {
              line-height: ${0}px;
            }
            &:hover {
              border-color: ${0} !important;
            }
          }
        }
`),o.inputStyles.textStyles.placeholderColor,o.inputStyles.textStyles.fontFamily,o.inputStyles.textStyles.fontSize,o.inputStyles.textStyles.fontWeight,o.inputStyles.textStyles.letterSpacing,o.inputStyles.textStyles.height,o.inputStyles.border.activeColor),style:Object.assign({boxSizing:"border-box",borderRadius:o.inputStyles.borderRadius,paddingLeft:16,paddingRight:0,paddingTop:0,paddingBottom:0,height:o.inputStyles.textStyles.height,textAlign:"left",color:o.inputStyles.textStyles.formInputTextColor,fontFamily:o.inputStyles.textStyles.fontFamily,fontSize:o.inputStyles.textStyles.fontSize,fontWeight:o.inputStyles.textStyles.fontWeight,letterSpacing:o.inputStyles.textStyles.letterSpacing,backgroundColor:o.inputStyles.inputBackgroundColor,border:"1px solid",borderColor:o.inputStyles.border[F?"defaultColor":"errorColor"]},C?{borderColor:o.inputStyles.border[F?"activeColor":"errorColor"],boxShadow:"0 0 5px "+o.focusColor}:{}),type:(e=>{switch(e){case n.g:return"email";case n.k:return"tel";default:return"text"}})(u),name:u===n.g?"email":void 0,tabIndex:l?-1:0,placeholder:D,"aria-label":(()=>{let e;return e=u===n.c?"date":u===n.g?"email":"text",c||m||e})(),"aria-invalid":!F,"aria-describedby":F?void 0:y,onBlur:e=>$({value:e.target.value,validate:!0,hasChangedSinceLastValidation:!1}),onChange:e=>$({value:e.target.value,validate:!1,hasChangedSinceLastValidation:!0}),onFocus:()=>I(!0),options:u===n.c?{date:!0,datePattern:p,delimiter:f}:{delimiter:""},value:_||""}),!l&&!x&&r.default.createElement(T.a,{theme:o,formVersionCId:e,componentAriaID:y,componentInstance:d}))},_=o("../forms/src/Constants/defaultTheme/button.ts");let A,$=e=>e;const{THEME_KEY:F}=_.a;var D=({componentId:e,formVersionCId:t,theme:o})=>{const n=Object(i.c)(t=>s.i.componentSelectById(t,e)),a=Object(i.c)(t=>s.i.getComponentActionId(t,e)),l=Object(i.c)(s.e.isDesignWorkflow),d=Object(j.a)(A||(A=$`
&& {
    &&& {
      &:focus {
        box-shadow: 0 0 5px ${0};
      }
      ${0}
    }
  }
`),o.focusColor,!1!==o[F].specifyHoverBackgroundColor?`\n      &:hover {\n        background-color: ${o[F].hoverBackgroundColor} !important;\n        ${o[F].hoverTextColor||o[F].textColor?`color: ${o[F].hoverTextColor||o[F].textColor} !important;`:""}\n      }`:"");return r.default.createElement(C,{formVersionCId:t,actionId:a},({onClick:e,handlingFormAction:t})=>r.default.createElement(b.a,{className:t?"klaviyo-spinner "+d:d,style:Object.assign({background:o[F].backgroundColor,borderRadius:o[F].borderRadius,borderStyle:o[F].borderStyle,borderColor:o[F].borderColor,borderWidth:o[F].borderWidth,color:o[F].textStyles.color,fontFamily:o[F].textStyles.fontFamily,fontSize:o[F].textStyles.fontSize,fontWeight:o[F].textStyles.fontWeight,letterSpacing:o[F].textStyles.letterSpacing,lineHeight:1,whiteSpace:"normal",paddingTop:o[F].paddingTop,paddingBottom:o[F].paddingBottom,textAlign:"center",wordBreak:"break-word",alignSelf:"flex-end",cursor:"pointer",height:o[F].height},o[F].fullWidth?{width:"100%"}:{paddingLeft:10,paddingRight:10}),type:"button",onClick:e,tabIndex:l?-1:0},n.data.content))};o("../../node_modules/core-js/modules/es6.regexp.to-string.js");const M=["selectorType","fillColor","formVersionCId"],R=({fillColor:e})=>r.default.createElement("g",{id:"checkboxInner",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{id:"checkbox_on",transform:"translate(3.000000, 4.000000)",fill:"#303B43"},r.default.createElement("polygon",{id:"Shape",fill:e,points:"4.45454545 9.20149254 1.11363636 5.75373134 0 6.90298507 4.45454545 11.5 14 1.64925373 12.8863636 0.5"}))),z=({fillColor:e})=>r.default.createElement("g",{id:"radioInner",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{id:"Group-17-Copy",transform:"translate(4.000000, 4.000000)",fill:"#303B43"},r.default.createElement("circle",{fill:e,id:"Oval-Copy",cx:"6",cy:"6",r:"5.55555556"})));var B=e=>{let{selectorType:t,fillColor:o}=e,n=c()(e,M);return r.default.createElement("svg",l()({style:{cursor:"pointer",display:"none",position:"absolute",margin:0},width:"20px",height:"20px",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},n),r.default.createElement("defs",null),"radio"===t?r.default.createElement(z,{fillColor:o}):r.default.createElement(R,{fillColor:o}))};let N,P=e=>e;const H=["selectorType","valid","theme","formVersionCId"],W=({backgroundColor:e})=>r.default.createElement("g",null,r.default.createElement("g",null,r.default.createElement("rect",{strokeWidth:"1",x:"0.5",y:"0.5",width:"19",height:"19",rx:"2.22222222",fill:e}))),L=({backgroundColor:e})=>r.default.createElement("g",null,r.default.createElement("g",null,r.default.createElement("circle",{strokeWidth:"1",cx:"10",cy:"10",r:"9.5",fill:e})));var q=e=>{let{selectorType:t,valid:o,theme:n}=e,i=c()(e,H);return r.default.createElement("svg",l()({className:Object(j.a)(N||(N=P`
&& {
        &&& {
          input:focus + label + label > * {
            filter: drop-shadow(0px 0px 2px ${0});
            stroke: ${0};
          }
        }
      }
`),n.focusColor,n.inputStyles.border.activeColor),style:{stroke:o?n.inputStyles.border.defaultColor:n.inputStyles.border.errorColor,marginRight:8,minWidth:20,width:"auto",height:"auto"},width:"20px",height:"20px",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},i),"radio"===t?r.default.createElement(L,{backgroundColor:n.inputStyles.inputBackgroundColor}):r.default.createElement(W,{backgroundColor:n.inputStyles.inputBackgroundColor}))};var U=({name:e,label:t,isValid:o,componentAriaID:i,componentType:s,onChange:a,tabIndex:l,theme:d,formVersionCId:c})=>{const{current:m}=Object(r.useRef)(Object(O.a)(e+"__")),u=s===n.m?"radio":"checkbox";return r.default.createElement(r.default.Fragment,null,r.default.createElement(b.f,{style:{position:"absolute",width:0,opacity:0},tabIndex:l,type:u,id:m,name:e,onChange:a,"aria-invalid":!o,"aria-label":t,"aria-describedby":i}),r.default.createElement(b.g,{style:{display:"flex",alignItems:"center",flex:d.inputStyles.arrangement===n.a?" 1 0 100%":" 0 0 auto",paddingBottom:8,wordBreak:"break-word",maxWidth:"100%",cursor:"pointer"},htmlFor:m},r.default.createElement(q,{valid:o,selectorType:u,"aria-hidden":"true",theme:d,formVersionCId:c}),r.default.createElement(B,{selectorType:u,"aria-hidden":"true",formVersionCId:c,fillColor:d.inputStyles.textStyles.formInputTextColor}),r.default.createElement(b.b,{style:{cursor:"pointer",color:d.inputStyles.textStyles.color,fontFamily:d.inputStyles.textStyles.fontFamily,fontSize:d.inputStyles.textStyles.fontSize,fontWeight:d.inputStyles.textStyles.fontWeight,letterSpacing:d.inputStyles.textStyles.letterSpacing,marginRight:24,display:"flex",position:"relative",top:1}},t)))};let Y,K=e=>e;const J=["selected","id","label"],G=({options:e,componentType:t,toggledOptionIndex:o})=>e.reduce((e,r,i)=>{let{selected:s,id:a,label:l}=r,d=c()(r,J),m=t!==n.m&&s;return o===i&&(m=!m),e.push(Object.assign({selected:m,label:l,id:a||Object(O.a)(l+"__")},d)),e},[]);var X=({formVersionCId:e,componentId:t,theme:o})=>{const a=Object(i.c)(s.e.isDesignWorkflow),l=Object(i.c)(o=>s.u.getOpenFormVersionComponentInstance(o,e,t)),d=Object(i.c)(e=>s.i.getComponentType(e,t)),c=Object(i.c)(e=>s.i.getComponentDropdownOptions(e,t)),m=Object(i.c)(e=>s.i.getComponentFieldId(e,t)),u=Object(i.c)(e=>s.i.getComponentLabel(e,t)),p=Object(i.b)(),[f,g]=Object(r.useState)([]);Object(r.useEffect)(()=>{g(G({options:c,componentType:d}))},[c]);const{inputName:h,labelId:y}=Object(r.useMemo)(()=>{const e=Object(O.a)(encodeURIComponent(m)+"__");return{inputName:e,labelId:`kl_${e}_label`}},[]),C=a||!l||void 0===l.valid||l.valid;return r.default.createElement(b.b,{className:Object(j.a)(Y||(Y=K`
&& {
        &&& {
          input:focus + label > svg circle,
          input:focus + label > svg rect {
            stroke: ${0};
          }
        }
      }
`),o.inputStyles.border.activeColor),style:Object.assign({alignSelf:"flex-end"},o.inputStyles.arrangement===n.a?{display:"block"}:{flexDirection:"column",flexWrap:"wrap"})},r.default.createElement(w.a,{id:y,theme:o,style:{marginRight:8,marginBottom:8}},u),r.default.createElement(b.b,{style:Object.assign({},o.inputStyles.arrangement===n.a?{display:"block"}:{display:"inline-flex",justifyContent:"flex-start",flexWrap:"wrap"}),role:d===n.m?"radiogroup":"group","aria-labelledby":y},f.map(({label:i,id:l},c)=>r.default.createElement(U,{key:l,formVersionCId:e,theme:o,name:h,label:i,isValid:C,componentType:d,componentAriaID:y,onChange:()=>(o=>{const r=G({options:f,componentType:d,toggledOptionIndex:o});g(r);const i=(e=>e.filter(({selected:e})=>e).map(e=>e.value||e.label))(r);p(s.u.validateOpenFormVersionComponent({formVersionCId:e,componentId:t,value:d===n.m?i.toString():i}))})(c),tabIndex:a?-1:0}))),!a&&r.default.createElement(T.a,{theme:o,formVersionCId:e,componentAriaID:y,componentInstance:l}))};var Q=(e,t=(()=>r.default.createElement(r.default.Fragment,null)))=>{function o(o){const[n,i]=r.default.useState(0),s=r.default.useCallback(()=>i(e=>e<5?e+1:e),[]),a=r.default.useMemo(()=>r.default.lazy(()=>e().catch(()=>({default:()=>(s(),r.default.createElement(r.default.Fragment,null))}))),[e,n]);return r.default.createElement(r.default.Suspense,{fallback:r.default.createElement(t,null)},r.default.createElement(a,o))}return o.displayName="LazyLoader",o};const Z=f,ee={[n.h]:x,[n.p]:Z,[n.q]:V,[n.g]:V,[n.k]:Q(()=>Promise.all([o.e(1),o.e(11),o.e(3)]).then(o.bind(null,"../forms/src/Client/Components/FormComponents/PhoneNumberInput/index.ts"))),[n.b]:D,[n.j]:X,[n.m]:X,[n.c]:V,[n.f]:Q(()=>Promise.all([o.e(1),o.e(2)]).then(o.bind(null,"../forms/src/Client/Components/FormComponents/Dropdown/index.ts")))}},"../forms/src/Client/Components/FormComponents/Label.tsx":function(e,t,o){"use strict";var n=o("../../node_modules/@babel/runtime/helpers/extends.js"),r=o.n(n),i=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),s=o.n(i),a=o("../../node_modules/preact/compat/dist/compat.module.js"),l=o("../forms/src/Client/Components/ResetElements/index.tsx");const d=["children","theme","style"];t.a=e=>{let{children:t,theme:o,style:n}=e,i=s()(e,d);return t?a.default.createElement(l.g,r()({style:Object.assign({color:o.inputStyles.textStyles.color,fontFamily:o.inputStyles.textStyles.fontFamily,fontSize:o.inputStyles.textStyles.fontSize,fontWeight:o.inputStyles.textStyles.labelFontWeight,letterSpacing:o.inputStyles.textStyles.letterSpacing,paddingBottom:6},n)},i),t):null}},"../forms/src/Client/Components/FormComponents/ValidationMessage.tsx":function(e,t,o){"use strict";o("../../node_modules/core-js/modules/es6.regexp.replace.js");var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/node_modules/react-redux/es/index.js"),i=o("../../node_modules/goober/dist/goober.esm.js"),s=o("../forms/src/Client/Components/ResetElements/index.tsx"),a=o("../forms/src/Client/formValidation/isRequired.ts"),l=o("../forms/src/Client/formValidation/email.ts"),d=o("../forms/src/Client/formValidation/date.ts"),c=o("../forms/src/Client/formValidation/phoneNumber.ts"),m=o("../forms/src/Constants/components.ts"),u=o("../forms/src/ClientStore/index.ts");let p,f=e=>e;t.a=({formVersionCId:e,componentInstance:t,componentAriaID:o,theme:b})=>{const g=Object(r.c)(t=>u.q.getFormVersionFormTypeDirection(t,u.u.getOpenFormVersionFormVersionId(t,e))),h=!(null==g||!g.startsWith("BOTTOM")),y=b.inputStyles.textStyles.errorColor;return n.default.createElement(s.b,{style:{width:"100%",position:"relative"}},(null==t?void 0:t.validationErrorType)&&n.default.createElement(s.b,{style:Object.assign({backgroundColor:"white",position:"absolute",zIndex:1,right:0,borderRadius:4,animation:"klaviyo-fadein 0.4s"},h?{bottom:47}:{top:9})},n.default.createElement(s.b,{className:Object(i.a)(p||(p=f`
&& {
              &&& {
                &::after {
                  content: '';
                  display: block;
                  position: absolute;
                  width: 0;
                  height: 0;
                  border-style: solid;
                  left: 8px;
                  border-width: 8px;
                  ${0}
                }
                &::before {
                  content: '';
                  display: block;
                  position: absolute;
                  width: 0;
                  height: 0;
                  border-style: solid;
                  border-width: 9px;
                  left: 7px;
                  ${0};
                }
              }
            }
`),h?"bottom: -15px;\n                  border-color: rgb(248, 236, 233) transparent transparent transparent;":"top: -15px;\n                  border-color: transparent transparent rgb(248, 236, 233) transparent;",h?`bottom: -17px;\n                    border-color: ${y} transparent transparent transparent;`:`top: -17px;\n                    border-color: transparent transparent ${y} transparent;`),style:{borderRadius:4,boxShadow:"1px 1px 4px 0 rgba(0, 0, 0, 0.26)",border:"1px solid "+b.inputStyles.textStyles.errorColor,backgroundColor:"rgb(248, 236, 233)"}},n.default.createElement(s.i,{style:{fontSize:14,padding:8,fontFamily:b.inputStyles.textStyles.fontFamily,color:b.inputStyles.textStyles.errorColor},role:"alert",id:o},(({validationErrorType:e,metadata:t})=>{var o;switch(e){case a.b:return"This field is required";case l.b:return"Please enter a valid email address";case d.b:return`Please enter a valid date format (${null==(o=m.e.find(({value:e})=>JSON.stringify(e)===JSON.stringify(null==t?void 0:t.format)))?void 0:o.label.replace(/ /g,(null==t?void 0:t.delimiter)||"/")})`;case c.b:return"Please enter a valid phone number";default:return""}})(t)))))}},"../forms/src/Client/Components/Modal/Modal.tsx":function(e,t,o){"use strict";o.r(t);var n=o("../../node_modules/@babel/runtime/helpers/extends.js"),r=o.n(n),i=(o("../../node_modules/core-js/modules/es6.array.iterator.js"),o("../../node_modules/core-js/modules/web.dom.iterable.js"),o("../../node_modules/core-js/modules/es6.regexp.to-string.js"),o("../../node_modules/preact/compat/dist/compat.module.js")),s=o("../forms/node_modules/react-redux/es/index.js"),a=o("../../node_modules/goober/dist/goober.esm.js"),l=o("../forms/src/Constants/defaultTheme/view.ts"),d=o("../forms/src/Constants/formTypes.ts"),c=o("../forms/src/Constants/designer.ts"),m=o("../forms/src/Constants/views.ts"),u=o("../forms/src/Constants/modal.ts"),p=o("../../node_modules/lodash-es/uniqueId.js"),f=o("../forms/src/Constants/teasers.ts"),b=o("../forms/src/Client/Components/View/index.ts"),g=o("../forms/src/Client/Components/View/Canned/ErrorView.tsx"),h=o("../../node_modules/lodash-es/merge.js"),y=o("../forms/src/ClientStore/index.ts"),C=o("../forms/src/Client/Components/ResetElements/index.tsx"),I=o("../forms/src/Constants/defaultTheme/clientThemeConstants.ts");const x=()=>null;var O=({formVersionId:e,onClick:t})=>{var o;const n=Object(s.b)(),[a,l]=Object(i.useState)(!1),d=!!Object(s.c)(y.n.getXButtonActive),m=Object(s.c)(y.e.isDesignWorkflow),u=I.a.dismiss,p=null==(o=Object(s.c)(t=>y.q.getFormVersionDataStyling(t,e)))?void 0:o.dismissButtonStyles,f=Object(h.a)({},u,p),b=f.size,g=a||d;return i.default.createElement(i.default.Fragment,null,g&&i.default.createElement(x,{size:b,isSelected:d,$margin:f.margin}),i.default.createElement(C.k,r()({width:b,height:b,tabIndex:0,alt:"Close form",style:{right:0,top:0,position:"absolute",zIndex:6,cursor:"pointer",height:b+"px",width:b+"px",marginRight:f.margin.right+"px",marginTop:f.margin.top+"px"},className:m?"":"klaviyo-close-form",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:t,"aria-describedby":"close-form"},m&&{onClick:()=>{n(y.n.slice.actions.setActiveSidebar({type:c.d}))},onMouseOver:()=>{l(!0)},onMouseLeave:()=>l(!1)}),i.default.createElement("title",{id:"close-form"},"Close form"),i.default.createElement("circle",{style:{cursor:"pointer"},cx:"10",cy:"10",r:"9.5",fill:f.backgroundColor,stroke:f.borderColor}),i.default.createElement("path",{style:{cursor:"pointer"},d:"M6 6L14 14M6 14L14 6L6 14Z",stroke:f.xColor,strokeWidth:f.xStroke,strokeLinecap:"round",strokeLinejoin:"round"})))},j=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),v=o.n(j),S=o("../forms/src/Constants/animation.ts"),w=o("../forms/src/Utils/isMobile.ts");var T=()=>window.matchMedia("(orientation: landscape)").matches;var E=(e,t)=>{var o,n,r,i,s,a;let l=e.formType===d.i&&[d.g,d.f].includes(null==(o=e.data)||null==(n=o.flyoutOptions)?void 0:n.docking);Object(w.a)()&&T()&&(l=!1);let c=e.formTypeDirection||null;var m,u;l&&t&&(c=(null==(m=e.data)||null==(u=m.flyoutOptions)?void 0:u.docking)===d.g?d.k:d.a);return{isDocked:l&&t,evaluatedFormTypeDirection:c,dockedDirection:(null==(r=e.data)||null==(i=r.flyoutOptions)?void 0:i.docking)===d.n||null==(s=e.data)||null==(a=s.flyoutOptions)?void 0:a.docking}};const k=["animatingOut","endAnimationCallback","touchStartHandler","touchMoveHandler","touchEndHandler","dragOffset","useTransition","transitionSpeed","isSwipeToDismissEnabled","formVersionCId"],V={LEFT:"slideinleft",TOP_CENTER:"slideinup",BOTTOM_CENTER:"slideindown",RIGHT:"slideinright"},_=({formType:e,formTypeDirection:t,teaserAnimationExists:o=!1,animatingOut:n=!1,isDesignWorkflow:r})=>{const i=e===d.j?"fadeinup":V[Object.keys(V).find(e=>t&&t.endsWith(e))];return Object.assign({},S.a,{animationFillMode:!n&&o?"both":"forwards"},r?{}:{animationDelay:!n&&o?"0.25s":"0s"},{animationName:"klaviyo-"+i},n?{animationDirection:"reverse",animationDuration:e===d.j?"0.35s":".5s"}:{animationDirection:"normal",animationDuration:e===d.j?"0.35s":"1s"})},A=({formTypeDirection:e,modalScale:t})=>{const o={TOP:{top:0},CENTER:{top:"50%",transform:`scale(${t}) translateY(-50%)`,marginTop:"auto",marginBottom:"auto"},BOTTOM:{bottom:0}},n={LEFT:{left:0},CENTER:{left:"50%",transform:`scale(${t}) translateX(-50%)`,marginLeft:"auto",marginRight:"auto"},RIGHT:{right:0}};return Object.assign({},o[Object.keys(o).find(t=>e&&e.startsWith(t))],n[Object.keys(n).find(t=>e&&e.endsWith(t))])},$=e=>{let{animatingOut:t=!1,endAnimationCallback:o=(()=>{}),touchStartHandler:n,touchMoveHandler:a,touchEndHandler:l,dragOffset:d=0,useTransition:m=!1,transitionSpeed:u=.5,isSwipeToDismissEnabled:p=!1,formVersionCId:f}=e,b=v()(e,k);const g=Object(s.b)(),[h,I]=Object(i.useState)(!1),x=Object(s.c)(e=>y.u.openFormVersionSelectById(e,f)),O=Object(s.c)(e=>y.q.selectById(e,x.formVersionId)),j=Object(s.c)(y.e.isDesignWorkflow);x.teaserAnimationInProgress&&!h&&I(!0);const S=Object(s.c)(y.n.getMobileDesktopType),{evaluatedFormTypeDirection:T}=E(O,j?S===c.e:Object(w.a)());return i.default.createElement(C.b,r()({},b,{onAnimationEnd:()=>{o(),g(y.u.setModalAnimation({formVersionCId:f,formAnimationInProgress:!1}))},onTouchStart:e=>{n&&n(e)},onTouchMove:e=>{a&&a(e)},onTouchEnd:e=>{l&&l(e)},onAnimationStart:()=>{g(y.u.setHideFormBeforeAnimation({formVersionCId:f,hideFormBeforeAnimation:!1}))},style:Object.assign({},p?Object.assign({bottom:-1*d+"px",position:"relative"},m?{transition:`bottom ${u}s`}:{}):{},(x.formAnimationInProgress||j)&&_({formType:null==O?void 0:O.formType,formTypeDirection:T,teaserAnimationExists:h,animatingOut:t,isDesignWorkflow:j})||{})}))};let F,D,M=e=>e;var R=({closePortal:e,formVersionCId:t,style:o,onClose:n,setOverlayDismissalPercentage:m})=>{var u,h;const I=Object(s.b)(),x=Object(s.c)(e=>y.u.openFormVersionSelectById(e,t)),j=Object(s.c)(e=>y.q.formVersionSelectById(e,x.formVersionId)),v=Object(s.c)(e=>y.B.viewIsSuccessView(e,null==x?void 0:x.currentViewId)),S=Object(s.c)(e=>y.q.getFormVersionDismissalConfig(e,j.formVersionId)),T=Object(s.c)(y.n.getMobileDesktopType),k=Object(s.c)(y.e.isDesignWorkflow),V=Object(s.c)(y.u.getTopModalCId),_=Object(s.c)(e=>y.C.getViewDataStyling(e,x.currentViewId)),A=Object(s.c)(e=>y.C.getViewDataStylingBorderRadius(e,x.currentViewId)),{isDocked:R,evaluatedFormTypeDirection:z,dockedDirection:B}=E(j,k?T===c.e:Object(w.a)()),N=Object(s.c)(e=>y.C.getViewDataStylingDropShadow(e,x.currentViewId)),P=Object(s.c)(e=>y.x.teasersByFormVersion(e,null==x?void 0:x.formVersionId))[0]||null,H=P&&(P.displayOrder===f.c||P.displayOrder===f.e)&&!v,[W,L]=Object(i.useState)(),[q,U]=Object(i.useState)(!1),Y=Object(i.useCallback)(()=>{q&&!k&&(U(!1),I(y.u.setModalAnimation({formVersionCId:t,formAnimationInProgress:!1})),H?(I(y.u.setCurrentTeaser({id:t,changes:{currentTeaserId:P.teaserId}})),I(y.u.closeFormAndOpenTeaser({formVersionCId:t})),m&&m(0)):e())},[q]),K=Object(i.useRef)(null);Object(i.useEffect)(()=>{L(Object(p.a)("modal_animation_key"))},[j.formType,j.formTypeDirection,T]);const J=()=>{n(),U(!0),I(y.u.setModalAnimation({formVersionCId:t,formAnimationInProgress:!0})),H&&(I(y.u.setTeaserAnimation({formVersionCId:t,teaserAnimationInProgress:!0})),I(y.u.setCurrentTeaser({id:t,changes:{currentTeaserId:null==P?void 0:P.teaserId}})))},[G,X]=Object(i.useState)(0),[Q,Z]=Object(i.useState)(0),[ee,te]=Object(i.useState)(!1),[oe,ne]=Object(i.useState)(.5),[re,ie]=Object(i.useState)(new Date),se=(e,t=!1)=>{m&&m(e,t)};Object(i.useEffect)(()=>{const o=o=>{var n,r,i;null!=(n=K.current)&&n.contains(o.target)||k||t!==V||null===e||x.currentTeaserId||(r=j.formType,void 0!==(i=S)&&r===d.j&&(Object(w.a)()?!0===(null==i?void 0:i.mobile):!0===(null==i?void 0:i.desktop)))||J()};return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o)}},[k,t,V,e,S,x]);const ae=null==(u=j.data)||null==(h=u.styling)?void 0:h.margin,le=!k&&R,de=Object(a.a)(D||(D=M`
&& {
    &&& {
      &::before {
        content: '';
        height: 100%;
        background-color: ${0};
        top: ${0};
        width: 100%;
        position: absolute;
      }
    }
  }
`),(null==_?void 0:_.backgroundColor)||l.a.theme.backgroundColor,B===d.f?"50%":"-50%");return W?i.default.createElement(C.b,{ref:K,role:"dialog","aria-modal":"true",style:Object.assign({},o,{borderRadius:(A||l.a.theme.borderRadius)+"px",position:"relative",outline:0,display:"flex",justifyContent:"center",flex:"0 0 auto"},j.formType===d.j?{alignSelf:"center"}:{}),"data-testid":T},i.default.createElement(i.Suspense,{fallback:i.default.createElement(C.b,null)},i.default.createElement($,r()({key:W,formVersionCId:t,animatingOut:q,endAnimationCallback:Y,"data-testid":j.formType,isSwipeToDismissEnabled:le},le?{touchStartHandler:e=>{ne(.5),te(!1),Z(e.touches[0].clientY),ie(new Date)},touchMoveHandler:e=>{e.preventDefault();const t=Math.abs(e.touches[0].clientY-Q);if(B===d.f)if(Q<=e.touches[0].clientY){const e=window.innerHeight-Q;se(t/e),X(t)}else{const e=.8*window.innerHeight;if(ne(.1),t<e){X(-1*t/(10/2**(-1*t/e)))}}else if(Q>=e.touches[0].clientY){se(t/Q),X(-1*t)}else{const e=.8*window.innerHeight;if(t<e){X(t/(10/2**(-1*t/e)))}}},touchEndHandler:e=>{te(!0);const t=(new Date).getTime()-re.getTime(),o=e.changedTouches[0].clientY-Q,n=o/t,r=B===d.f?e.changedTouches[0].clientY>Q:e.changedTouches[0].clientY<Q,i=B===d.f?.9:.1;(B===d.f?e.changedTouches[0].clientY/window.innerHeight>i:e.changedTouches[0].clientY/window.innerHeight<i)&&o>.2*window.innerHeight||Math.abs(n)>.8&&r&&o>=.2*window.innerHeight?(X(B===d.f?window.innerHeight:-1*window.innerHeight),se(1,!0),setTimeout(()=>J(),500)):(X(0),se(0,!0)),Z(0)},dragOffset:G,useTransition:ee,transitionSpeed:oe}:{}),(ce=i.default.createElement(C.b,{className:!k&&R?de:"",style:Object.assign({},N&&N.enabled?{boxShadow:`0px 0px ${N.blur}px ${N.color}`}:{},A?{borderRadius:A+"px"}:{})},i.default.createElement(C.b,{style:{position:"relative",display:"flex"}},i.default.createElement(O,{formVersionId:x.formVersionId,onClick:J}),x.errorViewMessage?i.default.createElement(g.a,{errorViewMessage:x.errorViewMessage}):i.default.createElement(b.a,{formVersionCId:t,formVersionId:x.formVersionId,viewId:x.currentViewId,isDocked:R,formTypeDirection:z}))),R?ce:i.default.createElement(C.b,{className:Object(a.a)(F||(F=M`
&& {
            &&& {
              &::before {
                content: '';
                display: block;
                height: ${0}px;
                width: 100%;
              }
              &::after {
                content: '';
                display: block;
                height: ${0}px;
                width: 100%;
              }
            }
          }
`),(null==ae?void 0:ae.top)||0,(null==ae?void 0:ae.bottom)||0),style:{position:"relative",flexDirection:"column",display:"flex",marginLeft:null==ae?void 0:ae.left,marginRight:null==ae?void 0:ae.right}},ce))))):null;var ce},z=o("../forms/src/Utils/calculateSideImageSize.ts");let B,N=e=>e;const P=(e,t)=>e===d.i&&t?t.startsWith("BOTTOM")?"flex-end":t.startsWith("CENTER")?"center":"flex-start":"center";t.default=({formVersionCId:e,closePortal:t,className:o})=>{var n,p,f,b;const g=Object(i.useRef)(null),[h,I]=Object(i.useState)(0),[x,O]=Object(i.useState)(!1),j=Object(s.c)(t=>y.u.openFormVersionSelectById(t,e)),v=Object(s.c)(e=>y.q.formVersionSelectById(e,j.formVersionId));let S=Object(s.c)(e=>y.C.getViewDataStylingSize(e,j.currentViewId))||l.a.theme.size;const T=Object(s.c)(e=>y.q.getFormVersionSideImage(e,j.formVersionId)),k=null==T||null==(n=T.data)||null==(p=n.styling)?void 0:p.sizeMultiplier,V=k?Object(z.a)(k,S):0,_=Object(s.c)(y.e.isDesignWorkflow),$=j.hideFormBeforeAnimation,F=Object(s.c)(y.n.getMobileDesktopType),D=F===c.e&&_,{isDocked:M,evaluatedFormTypeDirection:H}=E(v,_?F===c.e:Object(w.a)());(Object(w.a)()||D)&&T&&!T.displayOnMobile&&(S-=V);const W=null==(f=v.data)||null==(b=f.styling)?void 0:b.margin,L=M?0:(null==W?void 0:W.left)||0,q=M?0:(null==W?void 0:W.right)||0,U=Math.max(Math.min(parseInt(S.toString(),10),m.c),m.d)+q+L,Y=Object(s.c)(e=>y.C.getViewDataStylingOverlayColor(e,j.currentViewId))||l.a.theme.overlayColor,K=Object(s.c)(e=>{var t;return null==(t=y.C.getViewDataStyling(e,j.currentViewId))?void 0:t.mobileOverlay})||l.a.theme.mobileOverlay,J=Object(s.c)(y.e.isFetchingForms),[G,X]=Object(i.useState)(1),[Q,Z]=Object(i.useState)(!1),[ee,te]=Object(i.useState)(!1);j.teaserAnimationInProgress&&!ee&&te(!0);const oe={animationDuration:"0.35s",animationTimingFunction:"ease",animationPlayState:"running",animationDelay:Q||!ee||_?"0s":"0.25s",animationIterationCount:1,animationFillMode:!Q&&ee?"both":"forwards"},ne=Object.assign({},oe,{animationName:"klaviyo-fadeout"}),re=Object.assign({},oe,{animationName:"klaviyo-fadein"});var ie,se,ae;Object(i.useEffect)(()=>{const e=()=>{var e,t;const o=(null==(e=document)||null==(t=e.documentElement)?void 0:t.clientWidth)||window.innerWidth,n=D?c.f:o,r=M?n/U:Math.min(n/U,1);X(r)};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[U,F]),ie=g.current,se=_,ae=v.formType,Object(i.useEffect)(()=>{let e;return se||ae!==d.j||(e=null==ie?void 0:ie.addEventListener("keydown",e=>{if("Tab"!==e.key&&9!==e.keyCode)return;const t=ie.querySelectorAll('[tabindex]:not([tabindex="-1"])'),o=t[0],n=t[t.length-1];e.shiftKey?document.activeElement===o&&(n.focus(),e.preventDefault()):document.activeElement===n&&(o.focus(),e.preventDefault())})),()=>e?null==ie?void 0:ie.removeEventListener("keydown",e):void 0},[ie,se,ae]);let le=Object.assign({display:"flex",zIndex:_?0:u.a},$?{opacity:0}:{});le=F===c.e&&_?Object.assign({},le,{position:"relative",justifyContent:"center",alignItems:P(v.formType,H),backgroundColor:v.formType===d.i?(null==K?void 0:K.enabled)&&(null==K?void 0:K.color)||"transparent":Y,alignSelf:"center",height:"100%",width:"100%",overflowY:"auto"}):v.formType===d.i?Object.assign({},le,Object.assign({maxHeight:_?"100%":100/G+"%",position:_?"absolute":"fixed",transform:`scale(${G})`,transformOrigin:`${H&&H.endsWith("RIGHT")?"right":"left"} ${H&&H.startsWith("BOTTOM")?"bottom":"top"}`,overflow:_?"initial":"visible"},A({formTypeDirection:H,modalScale:G}))):Object.assign({},le,{position:_?"initial":"fixed",left:0,top:0,width:"100%",height:"100%",justifyContent:"center",alignItems:_?"flex-start":"center",overflow:"auto",backgroundColor:Y},Q?ne:re);let de={};F===c.e&&_?de=Object.assign({position:"absolute",transform:`scale(${G})`,transformOrigin:v.formType===d.i&&H?""+(H.startsWith("BOTTOM")?"bottom":"top"):"center",maxHeight:100/G+"%"},v.formType!==d.i||M||1!==G?{}:A({formTypeDirection:H,modalScale:G})):v.formType===d.j&&(de={overflow:_?"initial":"visible",transform:`scale(${G})`,transformOrigin:"center",maxHeight:_?"100%":100/G+"%"});const ce=null==K?void 0:K.enabled,me=Object(a.a)(B||(B=N`
&& {
    &&& {
      &::before {
        content: '';
        background-color: ${0};
        height: 100%;
        width: 100%;
        left: 0;
        top: 0;
        bottom: 0;
        right: 0;
        position: fixed;
        z-index: ${0};
        ${0};
        opacity: ${0};
      }
    }
  }
`),(null==K?void 0:K.color)||l.a.theme.mobileOverlay.color,u.a,x?"transition: opacity .5s ease;":"",h?1-h:1);return!j.currentTeaserId||j.teaserAnimationInProgress||j.formAnimationInProgress?le.display="flex":(!_&&Q&&Z(!1),le.display="none"),ue=v.formType===d.i&&Object(w.a)()&&(null==K?void 0:K.enabled)&&"none"!==le.display,pe=i.default.createElement(C.b,{className:o||"",style:le,ref:g},J?i.default.createElement(C.h,null,"Loading..."):i.default.createElement(R,r()({closePortal:t,formVersionCId:e,style:de,onClose:()=>{Z(!0)}},ce?{setOverlayDismissalPercentage:(e,t=!1)=>{I(e),O(t)}}:{}))),ue?i.default.createElement(C.b,null,i.default.createElement(C.b,{className:me,style:ce?Object.assign({},Q?ne:re):{}}),pe):pe;var ue,pe}},"../forms/src/Client/Components/ResetElements/CleaveInput.tsx":function(e,t,o){"use strict";o.d(t,"a",(function(){return l}));var n=o("../../node_modules/@babel/runtime/helpers/extends.js"),r=o.n(n),i=o("../../node_modules/preact/compat/dist/compat.module.js"),s=o("../forms/src/Constants/components.ts");const a=i.default.lazy(()=>o.e(13).then(o.t.bind(null,"../../node_modules/cleave.js/react.js",7))),l=e=>i.default.createElement(i.Suspense,{fallback:i.default.createElement("div",null)},i.default.createElement(a,r()({},e,{className:`needsclick ${e.className} ${s.o}`})))},"../forms/src/Client/Components/ResetElements/index.tsx":function(e,t,o){"use strict";o.d(t,"b",(function(){return m})),o.d(t,"c",(function(){return u})),o.d(t,"a",(function(){return p})),o.d(t,"h",(function(){return f})),o.d(t,"e",(function(){return b})),o.d(t,"i",(function(){return g})),o.d(t,"j",(function(){return h})),o.d(t,"f",(function(){return y})),o.d(t,"d",(function(){return C})),o.d(t,"k",(function(){return I})),o.d(t,"g",(function(){return x}));var n=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),r=o.n(n),i=o("../../node_modules/@babel/runtime/helpers/extends.js"),s=o.n(i),a=o("../../node_modules/preact/compat/dist/compat.module.js"),l=o("../forms/src/Constants/components.ts");o("../forms/src/Client/client.scss");const d=["tabIndex","className","alt"],c=["tabIndex","className","style","alt","onClick"],m=a.default.forwardRef((e,t)=>a.default.createElement("div",s()({ref:t},e,{className:`needsclick ${e.className||""} ${l.o}`}))),u=a.default.forwardRef((e,t)=>a.default.createElement("form",s()({ref:t},e,{className:`needsclick ${e.className||""} ${l.o}`}))),p=a.default.forwardRef((e,t)=>a.default.createElement("button",s()({ref:t},e,{className:`needsclick ${e.className||""} ${l.o}`}),e.children)),f=a.default.forwardRef((e,t)=>a.default.createElement("p",s()({ref:t},e,{className:`needsclick ${e.className||""} ${l.o}`}))),b=a.default.forwardRef((e,t)=>a.default.createElement("img",s()({ref:t},e,{className:`needsclick ${e.className||""} ${l.o}`}))),g=a.default.forwardRef((e,t)=>a.default.createElement("span",s()({ref:t},e,{className:`needsclick ${e.className||""} ${l.o}`}))),h=a.default.forwardRef((e,t)=>a.default.createElement("svg",s()({ref:t},e,{className:`needsclick ${e.className||""} ${l.o}`}))),y=a.default.forwardRef((e,t)=>a.default.createElement("input",s()({ref:t},e,{className:`needsclick ${e.className||""} ${l.o}`}))),C=e=>{let{tabIndex:t,className:o,alt:n}=e,i=r()(e,d);return a.default.createElement(p,{type:"button",tabIndex:t,className:o},a.default.createElement(b,s()({alt:n},i)))},I=e=>{let{tabIndex:t,className:o,style:n,onClick:i}=e,l=r()(e,c);return a.default.createElement(p,{tabIndex:t,className:o,style:n,onClick:i},a.default.createElement(h,s()({role:"img"},l),l.children))},x=a.default.forwardRef((e,t)=>a.default.createElement("label",s()({ref:t},e,{className:`needsclick ${e.className||""} ${l.o}`})))},"../forms/src/Client/Components/Teaser/Teaser.tsx":function(e,t,o){"use strict";o.r(t);var n=o("../../node_modules/@babel/runtime/helpers/extends.js"),r=o.n(n),i=(o("../../node_modules/core-js/modules/es6.array.iterator.js"),o("../../node_modules/core-js/modules/web.dom.iterable.js"),o("../../node_modules/preact/compat/dist/compat.module.js")),s=o("../forms/node_modules/react-redux/es/index.js"),a=o("../../node_modules/lodash-es/uniqueId.js"),l=o("../../node_modules/goober/dist/goober.esm.js"),d=o("../forms/src/ClientStore/index.ts"),c=o("../forms/src/Client/Components/ResetElements/index.tsx"),m=o("../forms/src/Client/Components/FormComponents/FormComponent/typeToComponentMapping.tsx"),u=o("../forms/src/Constants/quill.ts");var p=({formVersionCId:e})=>{const t=Object(s.c)(t=>d.u.openFormVersionSelectById(t,e)),o=Object(s.c)(e=>d.q.formVersionSelectById(e,t.formVersionId)),n=Object(s.c)(d.n.getMobileDesktopType),r=Object(s.c)(e=>d.y.teasersByFormVersion(e,o.formVersionId))[0],[l,p]=Object(i.useState)();Object(i.useEffect)(()=>{p(Object(a.a)("modal_animation_key"))},[o.formType,o.formTypeDirection,n]);const f=m.a.TEXT;return l?i.default.createElement(c.b,null,i.default.createElement(i.Suspense,{fallback:i.default.createElement(c.b,null)},i.default.createElement(f,{itemId:r.teaserId,parentType:u.b}))):null},f=o("../forms/src/Constants/designer.ts"),b=o("../forms/src/Constants/modal.ts"),g=o("../forms/src/Constants/components.ts"),h=o("../forms/src/Constants/teasers.ts"),y=o("../forms/src/Constants/formTypes.ts");let C;const I={[h.f]:{[y.l]:{},[y.k]:{},[y.m]:{},[y.d]:{},[y.e]:{},[y.b]:{},[y.a]:{},[y.c]:{}},[h.a]:{[y.l]:{},[y.k]:{},[y.m]:{},[y.d]:{},[y.e]:{},[y.b]:{},[y.a]:{},[y.c]:{}},[h.b]:{[y.l]:{clipPath:"polygon(100% 0, 0 100%, 0 0)"},[y.m]:{clipPath:"polygon(100% 100%, 0 0, 100% 0)"},[y.b]:{clipPath:"polygon(0 0, 0 100%, 100% 100%)"},[y.c]:{clipPath:"polygon(100% 100%, 0 100%, 100% 0)"}}},x=({theme:e,type:t,direction:o})=>{const n=e.margin.left,r=e.margin.top;return{[h.f]:{[y.l]:{paddingBottom:r+"px"},[y.k]:{paddingBottom:r+"px"},[y.m]:{paddingBottom:r+"px"},[y.d]:{paddingBottom:r+"px"},[y.e]:{paddingBottom:r+"px"},[y.b]:{paddingTop:r+"px"},[y.a]:{paddingTop:r+"px"},[y.c]:{paddingTop:r+"px"}},[h.a]:{[y.l]:{paddingBottom:r+"px"},[y.k]:{paddingBottom:r+"px"},[y.m]:{paddingBottom:r+"px"},[y.d]:{paddingRight:n+"px"},[y.e]:{paddingLeft:n+"px"},[y.b]:{paddingTop:r+"px"},[y.a]:{paddingTop:r+"px"},[y.c]:{paddingTop:r+"px"}},[h.b]:{[y.l]:{},[y.m]:{},[y.b]:{},[y.c]:{}}}[t][o]},O=({theme:e,type:t,direction:o})=>{const n=Math.sqrt(e.size*e.size*2)/2,r=Math.sqrt(e.size*e.size-n*n);return{[h.f]:{[y.k]:{},[y.d]:{},[y.e]:{},[y.a]:{}},[h.a]:{[y.d]:{},[y.e]:{}},[h.b]:{[y.l]:{width:Math.sqrt(e.size*e.size*2),transform:"rotate(-45deg)",transformOrigin:"top left",top:e.size/2,left:-1*e.size/2,position:"relative",height:r,display:"flex",flexDirection:"column-reverse",alignItems:"center"},[y.m]:{width:Math.sqrt(e.size*e.size*2),transform:"rotate(45deg)",transformOrigin:"top left",top:-1*e.size/2,left:e.size/2,position:"relative",height:r,display:"flex",flexDirection:"column-reverse",alignItems:"center"},[y.b]:{height:e.size-16,width:Math.sqrt(e.size*e.size*2),transform:"rotate(45deg)",transformOrigin:"top left"},[y.c]:{height:e.size-16,width:Math.sqrt(e.size*e.size*2),position:"relative",top:e.size,left:0,transform:"rotate(-45deg)",transformOrigin:"top left"}}}[t][o]||{}},j=e=>{var t;return Object.assign({backgroundColor:e.backgroundColor},e.backgroundImage?{backgroundImage:e.backgroundImage&&`url(${e.backgroundImage.url})`,backgroundRepeat:"no-repeat",backgroundSize:e.backgroundImage&&("custom"===e.backgroundImage.position?e.backgroundImage.customWidth+"px":e.backgroundImage.position),backgroundPositionX:e.backgroundImage&&e.backgroundImage.alignment,backgroundPositionY:(null==(t=e.backgroundImage)?void 0:t.verticalAlignment)||"center"}:{})},v=Object(l.a)(C||(C=(e=>e)`
&& {
  > div {
    padding-bottom: 8px;
    padding-top: 8px;
  }
}
`));var S=o("../forms/src/Utils/isMobile.ts"),w=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),T=o.n(w),E=o("../forms/src/Constants/animation.ts");const k=["teaserType","teaserDirection","teaserDisplayOrder","animatingOut","endAnimationCallback","formVersionCId","style"],V={[h.f]:{CENTER_LEFT:"slideinup",TOP:"slideinup",BOTTOM:"slideindown",CENTER_RIGHT:"slideinup"},[h.a]:{CENTER_LEFT:"slideinleft",TOP:"slideinup",BOTTOM:"slideindown",CENTER_RIGHT:"slideinright"},[h.b]:{TOP_LEFT:"slideintopleft",BOTTOM_LEFT:"slideinbottomleft",TOP_RIGHT:"slideintopright",BOTTOM_RIGHT:"slideinbottomright"}},_=({teaserType:e,teaserDirection:t,animatingOut:o=!1,isDesignWorkflow:n,isFirstRender:r})=>{const i=V[e],s=i[Object.keys(i).find(e=>t&&t.startsWith(e))];let a="0s",l="forwards";return n?a="0.35s":r&&!o&&(a="2s",l="both"),Object.assign({},E.a,{animationDelay:a,animationFillMode:l,animationDuration:".4s",animationName:"klaviyo-"+s},o?{animationDirection:"reverse"}:{animationDirection:"normal"})},A=e=>{let{teaserType:t,teaserDirection:o,animatingOut:n=!1,endAnimationCallback:a=(()=>{}),formVersionCId:l,style:m={}}=e,u=T()(e,k);const p=Object(s.b)(),[f,b]=Object(i.useState)(!1),g=Object(s.c)(d.e.isDesignWorkflow),{teaserIsFirstRender:h}=Object(s.c)(e=>d.u.selectById(e,l));return Object(i.useEffect)(()=>{n&&b(!1)},[n]),i.default.createElement(c.b,r()({},u,{onAnimationEnd:()=>{p(d.u.setTeaserAnimation({formVersionCId:l,teaserAnimationInProgress:!1})),b(!0),a()},onAnimationStart:()=>{n&&(p(d.u.setTeaserAnimation({formVersionCId:l,teaserAnimationInProgress:!0})),p(d.u.setModalAnimation({formVersionCId:l,formAnimationInProgress:!0}))),p(d.u.setHideTeaserBeforeAnimation({formVersionCId:l,hideTeaserBeforeAnimation:!1}))},style:Object.assign({height:"100%",width:"100%"},m,(!f||n)&&_({teaserType:t,teaserDirection:o,animatingOut:n,isDesignWorkflow:g,isFirstRender:h})||{})}))};var $=o("../forms/src/ClientStore/teasers/utils.ts");let F,D=e=>e;t.default=({formVersionCId:e,className:t})=>{var o,n;const m=Object(s.b)(),u=Object(s.c)(d.e.isDesignWorkflow),C=Object(s.c)(t=>d.u.openFormVersionSelectById(t,e)),w=Object(s.c)(e=>d.q.formVersionSelectById(e,C.formVersionId)),T=Object(s.c)(d.n.getMobileDesktopType)===f.e||Object(S.a)(),E=Object(s.c)(e=>d.y.teasersByFormVersion(e,w.formVersionId))[0],k=C.hideTeaserBeforeAnimation,[V,_]=Object(i.useState)(),[M,R]=Object(i.useState)(!1),z=Object(i.useCallback)(()=>{M&&!u&&(m(d.u.closeTeaserAndOpenForm({formVersionCId:e})),R(!1))},[M]);Object(i.useEffect)(()=>{_(Object(a.a)("teaser_animation_key"))},[E.type,E.direction]);const B=E.type===h.f&&((null==(o=E.direction)?void 0:o.includes("TOP"))||(null==(n=E.direction)?void 0:n.includes("BOTTOM")))&&T;if(!E||!C.currentTeaserId&&!C.teaserAnimationInProgress)return null;const N=Object($.a)({teaserStyling:E.data.styling,teaserType:E.type}),P={theme:N,type:E.type,direction:E.direction},H=Object.assign({zIndex:u?0:b.a,position:u?"absolute":"fixed"},N.dropShadow.enabled?{filter:`drop-shadow(0px 0px ${N.dropShadow.blur}px ${N.dropShadow.color})`}:{},(({theme:e,type:t,direction:o})=>{const n=e.margin.left,r=e.margin.top;return{[h.f]:{[y.l]:{top:0,left:0,margin:`${r}px ${n}px`},[y.k]:{top:0,left:"50%",transform:`translate(calc(-50% - ${n}px))`,margin:`${r}px ${n}px`},[y.m]:{top:0,right:0,margin:`${r}px ${n}px`},[y.d]:{top:"50%",left:0,transform:"rotate(-90deg) translate(-50%, 0)",transformOrigin:"top left",marginLeft:r+"px"},[y.e]:{top:"50%",right:0,transform:"rotate(90deg) translate(50%, 0)",transformOrigin:"top right",marginRight:r+"px"},[y.b]:{bottom:0,left:0,margin:`${r}px ${n}px`},[y.a]:{bottom:0,left:"50%",transform:`translate(calc(-50% - ${n}px))`,margin:`${r}px ${n}px`},[y.c]:{bottom:0,right:0,margin:`${r}px ${n}px`}},[h.a]:{[y.l]:{top:0,left:0,margin:`${r}px ${n}px`},[y.k]:{top:0,left:"50%",transform:`translate(calc(-50% - ${n}px))`,margin:`${r}px ${n}px`},[y.m]:{top:0,right:0,margin:`${r}px ${n}px`},[y.d]:{left:0,margin:`${r}px ${n}px`,top:`calc(50% - ${r}px)`,transform:"translateY(-50%)"},[y.e]:{right:0,margin:`${r}px ${n}px`,top:`calc(50% - ${r}px)`,transform:"translateY(-50%)",paddingRight:n+"px"},[y.b]:{bottom:0,left:0,margin:`${r}px ${n}px`,paddingBottom:r+"px"},[y.a]:{bottom:0,left:"50%",transform:`translate(calc(-50% - ${n}px))`,margin:`${r}px ${n}px`,paddingBottom:r+"px"},[y.c]:{bottom:0,right:0,margin:`${r}px ${n}px`,paddingBottom:r+"px"}},[h.b]:{[y.l]:{top:0,left:0,height:e.size,width:e.size,margin:`${r}px ${n}px`},[y.m]:{top:0,right:0,height:e.size,width:e.size,margin:`${r}px ${n}px`},[y.b]:{bottom:0,left:0,height:e.size,width:e.size,margin:`${r}px ${n}px`},[y.c]:{bottom:0,right:0,height:e.size,width:e.size,margin:`${r}px ${n}px`}}}[t][o]})(P),(({theme:e,type:t,direction:o})=>({[h.f]:{[y.l]:{width:e.size-16},[y.k]:{width:e.size-16},[y.m]:{width:e.size-16},[y.d]:{width:e.size-16},[y.e]:{width:e.size-16},[y.b]:{width:e.size-16},[y.a]:{width:e.size-16},[y.c]:{width:e.size-16}},[h.a]:{[y.l]:{height:e.size-16,width:e.size-16},[y.k]:{height:e.size-16,width:e.size-16},[y.m]:{height:e.size-16,width:e.size-16},[y.d]:{width:e.size-16,height:e.size-16},[y.e]:{width:e.size-16,height:e.size-16},[y.b]:{height:e.size-16,width:e.size-16},[y.a]:{height:e.size-16,width:e.size-16},[y.c]:{height:e.size-16,width:e.size-16}},[h.b]:{[y.l]:{},[y.m]:{},[y.b]:{},[y.c]:{}}}[t][o]||{}))(P),B?{width:`calc(100% - ${2*N.margin.left}px)`}:{},k&&u?{opacity:0}:{}),W=Object.assign({overflow:"hidden",boxSizing:"border-box"},I[E.type][E.direction]||{},((e,t,o)=>{const n={};switch(t){case h.f:n.borderRadius=((e,t)=>{const o=e.margin.top,n=e.margin.left;let[r,i,s,a]=[e.borderRadius,e.borderRadius,e.borderRadius,e.borderRadius];return null!=t&&t.includes("BOTTOM")&&0===o&&(s=0,a=0),null!=t&&t.includes("TOP")&&0===o&&(i=0,r=0),null!=t&&t.includes("LEFT")&&0===n&&(r=0,a=0),null!=t&&t.includes("RIGHT")&&0===n&&(i=0,s=0),null!=t&&t.includes("CENTER")&&null!=t&&t.includes("LEFT")&&0===o&&(r=0,i=0),null!=t&&t.includes("CENTER")&&null!=t&&t.includes("RIGHT")&&0===o&&(r=0,i=0),`${r}px ${i}px ${s}px ${a}px`})(e,o);break;case h.a:n.borderRadius="50%"}return n})(N,E.type,E.direction),E.type!==h.b?j(N):{},h.f===E.type?{minHeight:50,height:"100%",padding:8}:{},h.a===E.type?{height:"100%",padding:8}:{height:"100%"},E.type===h.b?{display:"block"}:{display:"flex",flexDirection:"column",justifyContent:"center"}),L=Object(l.a)(F||(F=D`
&& {
    cursor: pointer;
    * {
      cursor: pointer;
    }
    /* This had to be added to override the quill editor's cursor: text */
    .${0} .ql-editor > * {
      cursor: pointer;
    }
  }
`),g.l);return i.default.createElement(c.a,r()({className:`kl-teaser-${w.formId} ${t}`,tabIndex:u?-1:0,style:H},u?{}:{onClick:()=>{R(!0)}}),i.default.createElement(A,{key:V,teaserType:E.type,teaserDirection:E.direction,teaserDisplayOrder:E.displayOrder,animatingOut:C.teaserAnimationInProgress&&!C.currentTeaserId||M,endAnimationCallback:z,formVersionCId:e,style:x(P),"data-testid":"animated-teaser"},i.default.createElement(c.i,{style:W,className:u?"":L},i.default.createElement(c.b,{style:Object.assign({},O(P),E.type===h.b?j(N):{}),className:E.type===h.b?v:""},i.default.createElement(p,{formVersionCId:e})))))}},"../forms/src/Client/Components/View/Canned/ErrorView.tsx":function(e,t,o){"use strict";var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/src/Client/Components/ResetElements/index.tsx");t.a=({errorViewMessage:e,isEmbed:t=!1})=>n.default.createElement(r.b,{style:{width:t?"100%":450,height:165,display:"flex",justifyContent:"center",alignItems:"center",background:"#ffffff"}},n.default.createElement(r.b,{style:{textAlign:"center",width:300}},e))},"../forms/src/Client/Components/View/index.ts":function(e,t,o){"use strict";o("../../node_modules/core-js/modules/es6.array.sort.js");var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/node_modules/react-redux/es/index.js"),i=o("../forms/src/Client/formActions/formActions.ts"),s=o("../forms/src/Constants/designer.ts"),a=o("../forms/src/Constants/formTypes.ts"),l=o("../forms/src/Constants/views.ts"),d=o("../../node_modules/@babel/runtime/helpers/extends.js"),c=o.n(d);o("../../node_modules/core-js/modules/es6.array.iterator.js"),o("../../node_modules/core-js/modules/web.dom.iterable.js");var m=o("../../node_modules/lodash-es/merge.js"),u=o("../forms/src/Constants/defaultTheme/formComponent.ts"),p=o("../forms/src/ClientStore/index.ts"),f=o("../forms/src/Client/Components/FormComponents/FormComponent/typeToComponentMapping.tsx"),b=o("../forms/src/Client/Components/ResetElements/index.tsx");const g=({children:e})=>e,h={outer:{right:"0 0 0 auto",left:"0 auto 0 0",center:"0 auto"},inner:{right:"flex-end",left:"flex-start",center:"center"}};var y=({componentId:e,componentPosition:t,formVersionCId:o,rowDroppableHover:i,setDragState:a,dragFinished:l})=>{const[d,y]=Object(n.useState)(!1),C=Object(n.useRef)(null),I=Object(r.b)(),x=Object(r.c)(t=>p.i.componentSelectById(t,e),(e,t)=>JSON.stringify(e)===JSON.stringify(t)),O=Object(r.c)(p.e.isDesignWorkflow),j=Object(r.c)(p.n.getActiveComponentId),{currentViewId:v}=Object(r.c)(e=>p.u.openFormVersionSelectById(e,o)),S=Object(r.c)(t=>p.i.getComponentTheme(t,e,v),(e,t)=>JSON.stringify(e)===JSON.stringify(t)),w=Object(r.c)(e=>p.C.getViewTheme(e,v)),T=Object(n.useMemo)(()=>Object(m.a)({},w,S,{[u.a.THEME_KEY]:x.data.styling}),[w,S,x.data.styling]),E=f.a[x.componentType],k=j===x.componentId,V=Object.assign({component:x},O?{onClick:()=>{I(p.n.slice.actions.setActiveSidebar({type:s.b,key:e}))},onMouseOver:()=>{l?a(!1):y(!0)},onMouseLeave:()=>y(!1),onDragStart:()=>y(!1),onDragEnd:()=>{a(!0)},ref:C}:{});return n.default.createElement(b.b,c()({style:Object.assign({display:"flex",justifyContent:h.inner[x.data.styling.innerAlignment]||"flex-start",padding:`${T[u.a.THEME_KEY].padding.top||0}px ${T[u.a.THEME_KEY].padding.right||0}px ${T[u.a.THEME_KEY].padding.bottom||0}px ${T[u.a.THEME_KEY].padding.left||0}px`,position:"relative"},T[u.a.THEME_KEY].blockBackgroundColor?{backgroundColor:T[u.a.THEME_KEY].blockBackgroundColor}:{},d?{cursor:"pointer"}:{},{flex:!1!==x.data.styling.fullWidth?"1 0 0":"0 1 auto"},!1===x.data.styling.fullWidth&&x.data.styling.alignment?{margin:h.outer[x.data.styling.alignment]}:{})},V,{"data-testid":"form-component",className:void 0}),O?n.default.createElement(g,{theme:T,active:k,componentId:e,componentPosition:t,componentRef:C.current,formVersionCId:o,isHovering:d,rowDroppableHover:i,setIsHovering:y},n.default.createElement(E,{theme:T,componentId:e,formVersionCId:o,itemId:e})):n.default.createElement(E,{theme:T,componentId:e,formVersionCId:o,itemId:e}))};var C=({rowId:e,formVersionCId:t})=>{const o=Object(r.c)(t=>p.w.getRowComponentIds(t,e)),[i,s]=Object(n.useState)(!1),[a,l]=Object(n.useState)(!1),[d,c]=Object(n.useState)(!1),m=(i?"top":a&&"bottom")||!1;return o.length?n.default.createElement(b.b,{"data-testid":"form-row",style:Object.assign({display:"flex",flexDirection:"row",alignItems:"stretch",position:"relative"},m?Object.assign({},"bottom"===m?{borderBottom:"2px",borderBottomStyle:"solid",borderBottomColor:"#2B98D3",marginBottom:"-2px"}:{borderTop:"2px",borderTopStyle:"solid",borderTopColor:"#2B98D3",marginTop:"-2px"}):{})},o.map((e,o)=>n.default.createElement(y,{key:e,componentId:e,componentPosition:o,formVersionCId:t,rowDroppableHover:(e,t)=>{"top"===e?s(t):l(t)},setDragState:e=>c(e),dragFinished:d})),null):null},I=o("../forms/src/Utils/isMobile.ts");const x=({children:e})=>e;var O=({columnId:e,formVersionCId:t,formVersionId:o,viewId:i,sideImageExistsAndHidden:a})=>{var l,d,m,u,f,g,h,y;const O=Object(r.b)(),j=Object(n.useRef)(null),[v,S]=Object(n.useState)(!1),w=Object(r.c)(p.e.isDesignWorkflow),T=Object(r.c)(e=>p.q.getFormVersionSideImage(e,o)),E=Object(r.c)(t=>p.g.getColumnRowIds(t,e)),k=Object(r.c)(t=>p.g.columnSelectById(t,e)),V=Object(r.c)(e=>p.C.getViewTheme(e,i)),_=Object(r.c)(e=>p.n.getActiveColumnId(e)),{padding:A,minimumHeight:$}=V,F=void 0!==(null==(l=k.data)||null==(d=l.styling)?void 0:d.sizeMultiplier)&&0===k.rows.length,{columnMargin:D,columnPadding:M}=((e,t,o,n)=>{const r={top:0,left:0,right:0,bottom:0},i={top:0,left:0,right:0,bottom:0};return n||void 0!==o&&(e?(r.top=t&&t.top?-1*t.top:0,r.bottom=t&&t.bottom?-1*t.bottom:0,0===o?r.left=t&&t.left?-1*t.left:0:1===o&&(r.right=t&&t.right?-1*t.right:0)):0===o?i.left=(null==t?void 0:t.left)||0:1===o&&(i.right=(null==t?void 0:t.right)||0)),{columnMargin:r,columnPadding:i}})(F,A,null==T?void 0:T.position,a),R=null==k||null==(m=k.data)||null==(u=m.styling)?void 0:u.sizeMultiplier,z=null==V?void 0:V.size,B=R&&z?((e,t,o)=>{const n=e/(e+1)*t;return o?n:t-n})(R,z,F):0,N=_===k.columnId,P=(null==V?void 0:V.borderStyle)&&"none"!==(null==V?void 0:V.borderStyle)&&(null==V?void 0:V.borderWidth)||0,H=null==k||null==(f=k.data)||null==(g=f.styling)?void 0:g.backgroundImage,W=null==k||null==(h=k.data)||null==(y=h.styling)?void 0:y.backgroundColor,L=Object.assign({},w&&F?{onClick:()=>{O(p.n.slice.actions.setActiveSidebar({type:s.a,key:e}))},onMouseOver:()=>{S(!0)},onMouseLeave:()=>S(!1),ref:j}:{}),q=Object(r.c)(e=>p.n.getMobileDesktopType(e))===s.e;return((e,t,o,n)=>{var r,i,s,a,l;const d=(null==(r=e.rows)?void 0:r.length)>0,c=(null==e||null==(i=e.data)||null==(s=i.styling)?void 0:s.backgroundImage)||(null==e||null==(a=e.data)||null==(l=a.styling)?void 0:l.backgroundColor);return!!d||(o?!n||t:!!c&&(!Object(I.a)()||t))})(k,(null==T?void 0:T.displayOnMobile)||!1,w,q)?n.default.createElement(n.default.Fragment,null,n.default.createElement(b.b,c()({style:Object.assign({display:"flex",flexDirection:"column",width:B?B+"px":"100%",marginTop:D.top+"px",marginBottom:D.bottom+"px",marginLeft:D.left+"px",marginRight:D.right+"px",paddingTop:M.top+"px",paddingBottom:M.bottom+"px",paddingLeft:M.left+"px",paddingRight:M.right+"px",backgroundColor:W},v?{cursor:"pointer"}:{},B?{minWidth:B+"px"}:{},H?{backgroundImage:`url(${H.url})`,backgroundRepeat:"no-repeat",backgroundSize:"custom"===H.position?H.customWidth+"px":H.position,backgroundPositionX:H.alignment,backgroundPositionY:H.verticalAlignment||"center"}:{},void 0!==$?{minHeight:$+"px"}:{},F?{}:{justifyContent:"center"})},null!=H&&H.altText?{title:null==H?void 0:H.altText}:{},L),n.default.createElement(x,{backgroundColorExists:!!W,backgroundImageExists:!!H,calculatedWidth:B,column:k,isDesignWorkflow:w,isHovering:v,isSelected:N,isSideImageColumn:F,viewBorderWidth:P,viewSize:z},null==E?void 0:E.map(e=>n.default.createElement(C,{key:e,rowId:e,formVersionCId:t}))))):null},j=o("../forms/src/Utils/calculateSideImageSize.ts");const v={left:{float:"left"},center:{margin:"0 auto"},right:{float:"right"}},S=(e,t,o)=>t?null!=o&&o.includes("BOTTOM")?`${e}px ${e}px 0 0`:`0 0 ${e}px ${e}px`:e+"px";var w=({viewId:e,isEmbed:t,formVersionId:o,formVersionCId:d,isDocked:c,formTypeDirection:m})=>{var u,f,g;const h=Object(r.c)(e=>p.q.formVersionSelectById(e,o)),y=Object(r.c)(t=>p.C.getViewColumnIds(t,e)),C=Object(r.c)(e=>p.g.columnSelectAll(e)).filter(e=>y.includes(e.columnId)).sort((e,t)=>e.position-t.position),x=Object(r.c)(t=>p.i.getSubmitFormActionsFromView(t,e)),w=Object(r.c)(t=>p.C.getViewTheme(t,e)),T=Object(r.c)(e=>p.q.getFormVersionSideImage(e,o)),E=null==T||null==(u=T.data)||null==(f=u.styling)?void 0:f.sizeMultiplier,k=E?Object(j.a)(E,w.size):0,V=Object(r.c)(t=>p.g.getViewColumns(t,e)).find(e=>e.position===(null==T?void 0:T.position)),_=Object(r.c)(p.e.isDesignWorkflow),A=Object(r.c)(e=>p.n.getMobileDesktopType(e))===s.e,$=((e,t,o,n,r)=>{var i,s,a,l;const d=!o&&(Object(I.a)()&&!t||t&&r),c=!t&&e&&!(null!=n&&null!=(i=n.data)&&null!=(s=i.styling)&&s.backgroundImage||null!=n&&null!=(a=n.data)&&null!=(l=a.styling)&&l.backgroundColor);return d||c})(!!T,_,null==T?void 0:T.displayOnMobile,V,A),F=$?w.size-k:void 0,D=Object(n.useRef)(null);return Object(n.useEffect)(()=>{const e=D.current;h.formType===a.j&&e&&e.focus()},[D]),n.default.createElement(b.c,{style:Object.assign({display:"flex",flexDirection:"row",boxSizing:"border-box"},t?Object.assign({width:"100%",overflow:"visible"},w.isMaxWidth?{maxWidth:w.size+"px"}:{},w.embedAlignment?v[w.embedAlignment]:{}):{overflow:"hidden",width:(F||w.size)+"px",minWidth:l.d+"px",maxWidth:l.c+"px"},{borderRadius:""+S(w.borderRadius,c,m),borderStyle:w.borderStyle,borderWidth:(w.borderWidth||0)+"px",borderColor:w.borderColor,backgroundColor:w.backgroundColor,backgroundImage:w.backgroundImage&&`url(${w.backgroundImage.url})`,backgroundRepeat:"no-repeat",backgroundSize:w.backgroundImage&&("custom"===w.backgroundImage.position?w.backgroundImage.customWidth+"px":w.backgroundImage.position),backgroundPositionX:w.backgroundImage&&w.backgroundImage.alignment,backgroundPositionY:(null==(g=w.backgroundImage)?void 0:g.verticalAlignment)||"center",paddingTop:w.padding.top+"px",paddingRight:w.padding.right+"px",paddingBottom:w.padding.bottom+"px",paddingLeft:w.padding.left+"px"}),className:"klaviyo-form klaviyo-form-version-cid_"+d,"data-testid":"klaviyo-form-"+h.formId,noValidate:!0,ref:D,tabIndex:-1,onSubmit:async e=>{if(e.preventDefault(),1!==x.length)return!1;const{actionId:t}=x[0],o=Object(i.a)({actionId:t,formVersionCId:d});return await new o({actionId:t,formVersionCId:d}).runAction(),!0}},C.map(t=>n.default.createElement(O,{key:t.columnId,columnId:t.columnId,formVersionCId:d,formVersionId:o,viewId:e,sideImageExistsAndHidden:$})),n.default.createElement("input",{style:{display:"none"},type:"submit",tabIndex:-1,value:"Submit"}))};t.a=w},"../forms/src/Client/Render.tsx":function(e,t,o){"use strict";o.r(t);var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/node_modules/react-redux/es/index.js"),i=o("../../node_modules/preact/dist/preact.module.js"),s=o("../../node_modules/goober/dist/goober.esm.js"),a=o("../forms/src/ClientStore/store.ts"),l=o("../../node_modules/@babel/runtime/helpers/extends.js"),d=o.n(l),c=o("../../node_modules/react-portal/es/PortalWithState.js");var m=o("../forms/src/Client/Components/Modal/Modal.tsx").default,u=o("../forms/src/ClientStore/index.ts");var p=o("../forms/src/Client/Components/Teaser/Teaser.tsx").default;var f=({formVersionCId:e,node:t})=>{const o=Object(r.b)(),i=Object(r.c)(u.e.isDesignWorkflow),s=Object(r.c)(t=>u.u.selectById(t,e)),a=Object(r.c)(e=>u.x.teasersByFormVersion(e,null==s?void 0:s.formVersionId)),l=a.length>0?a[0]:null;if(i&&null===t)return null;const d=t=>{const o=n.default.createElement(p,{formVersionCId:e,closePortal:i?()=>{}:t}),r=n.default.createElement(m,{formVersionCId:e,closePortal:i?()=>{}:t});return i?null!=s&&s.currentTeaserId?o:r:n.default.createElement(n.default.Fragment,null,l&&o,r)};return n.default.createElement(c.a,{key:e,defaultOpen:!0,onClose:()=>o(u.u.closeForm({formVersionCId:e})),closeOnEsc:!i,node:i?t:void 0},({closePortal:e,portal:t})=>[t(d(e))])},b=o("../forms/src/Client/Components/View/index.ts"),g=o("../forms/src/Client/Components/View/Canned/ErrorView.tsx"),h=o("../forms/src/Client/Components/ResetElements/index.tsx");var y=({node:e,formVersionCId:t})=>{const o=Object(r.c)(e=>u.u.openFormVersionSelectById(e,t)),i=e||document.querySelector(`div.klaviyo-form-${o.formId}.form-version-cid-${t}`);return i?Object(n.createPortal)(o.currentViewId?n.default.createElement(n.default.Fragment,null,o.errorViewMessage?n.default.createElement(g.a,{isEmbed:!0,errorViewMessage:o.errorViewMessage}):n.default.createElement(h.b,{style:{transform:"translate(0, 0)"}},n.default.createElement(b.a,{formVersionCId:t,formVersionId:o.formVersionId,viewId:o.currentViewId,isEmbed:!0,key:t}))):null,i):null};var C=()=>{const e=Object(r.c)(u.u.openFormVersionSelectIds),t=Object(r.c)(u.u.getOpenEmbedFormVersionIds);return n.default.createElement(n.Suspense,{fallback:n.default.createElement("div",null)},e.map(e=>{const o={formVersionCId:e};return t.includes(e)?n.default.createElement(y,d()({key:e},o)):n.default.createElement(f,d()({key:e},o))}))};Object(s.b)(i.g);t.default=()=>{const e=document.createElement("div");e.setAttribute("id","dynamic-react-root"),document.body.appendChild(e),Object(n.render)(n.default.createElement(r.a,{store:a.a},n.default.createElement(C,null)),e)}},"../forms/src/Client/formActions/formActions.ts":function(e,t,o){"use strict";o.d(t,"a",(function(){return U}));var n=o("../forms/src/ClientStore/store.ts"),r=o("../forms/src/ClientStore/index.ts"),i=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),s=o.n(i),a=o("../forms/src/Constants/actions.ts"),l=(o("../../node_modules/core-js/modules/es6.regexp.to-string.js"),o("../forms/src/Utils/debug.ts"));class d{constructor({formVersionCId:e,actionId:t}){this.currentHandlerStep="INSTANTIATED",this.formActionType=void 0,this.actionId=void 0,this.formVersionCId=void 0,this.formAction=void 0,this.formId=void 0,this.companyId=void 0,this.actionId=t,this.formVersionCId=e,this.formAction=r.b.actionSelectById(n.a.getState(),t);const o=n.a.getState();this.formId=r.u.getOpenFormVersionFormId(o,e),this.companyId=r.e.getKlaviyoCompanyId(o)}runAction(){return this.currentHandlerStep="PREHANDLER",new Promise(e=>e()).then(e=>this.__preHandler(e)).then(e=>(this.currentHandlerStep="HANDLER",e)).then(e=>this.__handler(e)).then(e=>(this.currentHandlerStep="POSTHANDLER",e)).then(e=>this.__postHandler(e)).catch(e=>this.__errorHandler(e))}__preHandler(e){}__handler(e){}__postHandler(e){}__errorHandler(e){Object(l.a)(e.toString(),{formActionType:this.formActionType,currentHandlerStep:this.currentHandlerStep})}}const c=["isSubmit"];class m extends d{constructor(e){let{isSubmit:t}=e;super(s()(e,c)),this.isSubmit=void 0,this.isSubmit=t,this.formActionType=a.a}__handler(){return n.a.dispatch(r.u.closeForm({formVersionCId:this.formVersionCId,logMetric:!this.isSubmit}))}}m.formActionType=a.a;var u=m,p=(o("../../node_modules/core-js/modules/es6.array.iterator.js"),o("../../node_modules/core-js/modules/web.dom.iterable.js"),o("../forms/src/Utils/errorTypes.ts")),f=o("../forms/src/Utils/promise.ts"),b=o("../forms/src/Utils/onsiteApi/learnq.ts"),g=o("../forms/src/ClientStore/logMetricAsync/actions.ts");o("../../node_modules/preact/compat/dist/compat.module.js");const h="An error occurred when submitting. Please try again later.";var y=o("../forms/src/Constants/metrics.ts"),C=o("../../node_modules/unfetch/dist/unfetch.mjs"),I=o("../config/lib/client.json");const x=`${I.API.url}${I.API.submitToListPath}`;var O=o("../../node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),j=o("../forms/src/Sentry.tsx"),v=o("../forms/src/Utils/camelizeKeys.ts");const S=I.API.url+"/ajax/sms/subscribe_unique_id",w=e=>e instanceof p.d;var T=class extends d{constructor(e){super(e),this.hiddenFieldsComponentId=void 0,this.composedFields=void 0;const t=n.a.getState();this.hiddenFieldsComponentId=r.i.getComponentIdByActionId(t,e.actionId),this.composedFields=r.u.getComposedFields(t,this.formVersionCId,this.hiddenFieldsComponentId)}async __preHandler(){const e=await n.a.dispatch(r.u.validateOpenFormVersion({formVersionCId:this.formVersionCId}));if(Object(O.f)(e)){const{components:t}=e.payload;if(t.some(({valid:e})=>!e))throw new p.c({type:"form"})}return!0}__requestUniqueID(){(e=>{const t={method:"POST",headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(Object(v.b)(e))};return Object(C.a)(S,t).then(e=>{if(e.status>=500)throw Error("Error sending request: "+e.url);return e}).then(e=>e.json()).then(e=>Object(v.a)(e))})({companyId:this.companyId,form_id:this.formId,email:this.composedFields.$email}).then(({data:{uniqueId:e}})=>{void 0!==e&&n.a.dispatch(r.e.slice.actions.setSmsSubscriptionUniqueId(e))}).catch(()=>{})}__errorHandler(e){const{composedFields:t,formId:o,companyId:i,formAction:s}=this;if(d.prototype.__errorHandler.call(this,e),(e=>[p.a,p.c].some(t=>e instanceof t))(e))throw e;n.a.dispatch(r.u.updateCurrentView({id:this.formVersionCId,changes:{errorViewMessage:w(e)?"Too many users are submitting at this moment. Please try again in a minute.":h}})),n.a.dispatch(Object(g.a)({metric:w(e)?y.i:y.c,formId:o,companyId:i,submittedFields:t,listId:null==s?void 0:s.listId})),Object(p.f)(e)||w(e)||j.a.captureException(e,{tags:{onSubmit:!0},extra:{submitAction:!0,formId:this.formId,companyId:this.companyId}})}};var E=class extends T{__handler(){const e=n.a.getState();Object(b.a)(this.composedFields);const t=r.u.getSubscriptionOnlyComponentData(e,this.formVersionCId);return this.composedFields=Object.assign({},this.composedFields,t||{}),r.i.anyComponentHasSubscribeToSMSAction(e,r.u.getOpenFormVersionFormVersionId(e,this.formVersionCId))&&this.__requestUniqueID(),this.__submitToList()}__submitHandlerCheck({success:e,errors:t=[]}){const{composedFields:o,formId:i,companyId:s,formAction:a}=this;if(!e&&"List does not exist."!==t[0])throw n.a.dispatch(r.u.updateCurrentView({id:this.formVersionCId,changes:{errorViewMessage:h}})),n.a.dispatch(Object(g.a)({metric:y.c,formId:i,companyId:s,submittedFields:o,listId:a.listId})),new p.a(t.join(" | "))}__submitToList(){const{composedFields:e,formId:t,companyId:o}=this,i=this.__makePOSTBody({composedFields:e}),s=n.a.getState();return Object(f.c)(()=>(e=>Object(C.a)(x,{method:"POST",headers:{"Access-Control-Allow-Headers":"*","Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:e.toString()}))(i),5,1e3+1e3*Math.random(),[429]).then(e=>{if(429===e.status)throw new p.d;return e.json()}).then(i=>{if(i.success&&this.formAction.actionType){n.a.dispatch(r.l.slice.actions.successForm({formId:t,successActionType:this.formAction.actionType}));const{currentViewId:a}=r.u.openFormVersionSelectById(s,this.formVersionCId),l=r.C.viewGetNameById(s,a);return Object(f.b)(200,Promise.all([n.a.dispatch(Object(g.a)({metric:y.h,logCustomEvent:!0,formId:t,companyId:o,submittedFields:e,action_type:"Submit Form"})),n.a.dispatch(Object(g.a)({metric:y.j,logCustomEvent:!0,logTelemetric:!1,formId:t,companyId:o,submittedFields:Object.assign({},e,{$step_name:l}),action_type:"Submit Step"}))])).then(()=>i).catch(()=>i)}return i})}__makePOSTBody({composedFields:e}){const t=new Date,o=Object.assign({},e,"object"==typeof window.Shopify&&window.Shopify.shop?{services:JSON.stringify({shopify:{source:"form"}})}:{}),{$exchange_id:n}=Object(b.c)(),r=Object.assign({g:this.formAction.listId,$fields:Object.keys(o).toString(),$list_fields:Object.keys(o).filter(e=>Array.isArray(o[e])).toString(),$timezone_offset:-t.getTimezoneOffset()/60},o,n?{$exchange_id:n}:{}),i=new URLSearchParams;return Object.keys(r).forEach(e=>{const t=r[e];return Array.isArray(t)?t.forEach(t=>i.append(e,t)):i.set(e,t)}),i}};class k extends E{__postHandler({success:e,errors:t=[]}){return r.u.openFormVersionSelectIds(n.a.getState()).includes(this.formVersionCId)&&this.formAction.viewId?(this.__submitHandlerCheck({success:e,errors:t}),n.a.dispatch(r.u.updateCurrentView({id:this.formVersionCId,changes:{currentViewId:this.formAction.viewId}}))):null}}k.formActionType=a.f;var V=k;o("../../node_modules/core-js/modules/es6.regexp.replace.js");const _=["isSubmit"];class A extends d{constructor(e){var t,o;let{isSubmit:n}=e;super(s()(e,_)),this.redirectUrl=void 0,this.newWindow=void 0,this.isSubmit=void 0,this.redirectUrl=(null==(t=this.formAction.data)?void 0:t.redirectUrl)||"about:blank",this.newWindow=!(null==(o=this.formAction.data)||!o.newWindow)&&this.formAction.actionType===a.b,this.isSubmit=!!n,this.formActionType=a.b}__redirectUrl(){const e=this.redirectUrl.replace(/^javascript:/,"");if(this.newWindow&&this.formAction.actionType===a.b){const t=window.open(e,"_blank");null==t||t.focus()}else window.location.assign(e)}__handler(){const{formId:e,newWindow:t,formVersionCId:o}=this,i=n.a.getState();this.formAction.actionType===a.b&&n.a.dispatch(r.l.slice.actions.successForm({formId:e,successActionType:a.b}));const s=r.u.getOpenFormVersionSentSubmitMetric(i,o),l=n.a.dispatch(Object(g.a)({metric:y.g,logTelemetric:!this.isSubmit&&!s,logCustomEvent:!0,formId:this.formId,companyId:this.companyId,action_type:"Go to URL",destination_url:this.redirectUrl}));return t?(this.__redirectUrl(),l):Object(f.b)(200,l).then(()=>this.__redirectUrl()).catch(()=>this.__redirectUrl())}}A.formActionType=a.b;var $=A;class F extends E{__postHandler({success:e,errors:t=[]}){this.__submitHandlerCheck({success:e,errors:t});const{formVersionCId:o,actionId:n}=this;return new $({formVersionCId:o,actionId:n,isSubmit:!0}).runAction()}}F.formActionType=a.e;var D=F;class M extends E{__postHandler({success:e,errors:t=[]}){this.__submitHandlerCheck({success:e,errors:t});const{formVersionCId:o,actionId:n}=this;return new u({formVersionCId:o,actionId:n,isSubmit:!0}).runAction()}}M.formActionType=a.d;var R=M;const z=e=>"This form is now set to display on Mobile devices only and subscribers will be routed to the list set on the "+e.toLowerCase()+" keyword.",B=e=>e+" Keyword",N=e=>e+" Message";z("Opt-in"),B("Opt-in"),N("Opt-in"),z("Subscribe"),B("Subscribe"),N("Subscribe");class P extends d{constructor(e){var t,o,n;super(e),this.toPhoneNumber=void 0,this.optInMessage=void 0,this.optInKeyword=void 0,this.toPhoneNumber=null==(t=this.formAction.data)?void 0:t.toPhoneNumber,this.optInMessage=(null==(o=this.formAction.data)?void 0:o.optInMessage)||"Send this text to subscribe to SMS updates!",this.optInKeyword=(null==(n=this.formAction.data)?void 0:n.optInKeyword)||"JOIN",this.formActionType=a.g}__handler(){const e=r.e.getSmsSubscriptionUniqueId(n.a.getState()),t=function(e){return e&&6===e.length}(e)?`${this.optInKeyword}:${e}`:this.optInKeyword,o=`sms:${this.toPhoneNumber}?&body=${encodeURIComponent(`${this.optInMessage} (ref:${t})`)}`;n.a.dispatch(r.l.slice.actions.successForm({formId:this.formId,successActionType:a.g})),n.a.dispatch(r.u.closeForm({formVersionCId:this.formVersionCId}));const i=n.a.dispatch(Object(g.a)({metric:y.k,logCustomEvent:!0,formId:this.formId,companyId:this.companyId,action_type:"Subscribe Via SMS",sms_keyword:this.optInKeyword,destination_url:o}));return Object(f.b)(200,i).then(()=>window.location.assign(o)).catch(()=>window.location.assign(o))}}P.formActionType=a.g;var H=P;class W extends T{__handler(){const{formVersionCId:e,formAction:t,composedFields:o,formId:i,companyId:s}=this,a=n.a.getState();if(!r.u.openFormVersionSelectIds(a).includes(e)||null==t||!t.viewId)return null;Object(b.a)(o);const l=r.u.getOpenFormVersionFormVersionId(a,e);r.i.anyComponentHasSubscribeToSMSAction(a,l)&&this.__requestUniqueID();const d=!!Object.keys(r.u.getInputComponentFields(a,e)).length,{currentViewId:c}=r.u.openFormVersionSelectById(a,e),m=r.C.viewSelectById(a,c).name;return d&&(n.a.dispatch(Object(g.a)({metric:y.j,logCustomEvent:!0,logTelemetric:!1,formId:i,companyId:s,submittedFields:Object.assign({},o,{$step_name:m}),action_type:"Submit Step"})),r.i.shouldTriggerProfileSubmitMetric(a,l)&&n.a.dispatch(Object(g.a)({metric:y.h,logCustomEvent:!0,formId:i,companyId:s,submittedFields:o,action_type:"Submit Form"}))),n.a.dispatch(r.u.updateCurrentView({id:e,changes:{currentViewId:t.viewId}}))}}W.formActionType=a.h;var L=W;const q={[u.formActionType]:u,[V.formActionType]:V,[L.formActionType]:L,[$.formActionType]:$,[R.formActionType]:R,[D.formActionType]:D,[H.formActionType]:H},U=({actionId:e,formVersionCId:t})=>{const o=n.a.getState(),i=r.b.getActionType(o,e),s=r.u.getInputComponentFields(o,t),a=s.$email||s.$phone_number;return i!==V.formActionType||a?q[i]:L}},"../forms/src/Constants/animation.ts":function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));const n={animationTimingFunction:"ease",animationPlayState:"running",animationDelay:"0s",animationIterationCount:1,animationFillMode:"forwards"}},"../forms/src/Constants/modal.ts":function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));const n=9e4},"../forms/src/Constants/quill.ts":function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"a",(function(){return r}));const n="teaser",r="component"},"../forms/src/Utils/calculateSideImageSize.ts":function(e,t,o){"use strict";t.a=(e,t)=>e/(e+1)*t}}]);